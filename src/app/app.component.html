<mat-toolbar color="primary" role="header">
	<span>Asservissement</span>
	<span class="spacer"></span>
	<button
		class="copy-to-clipboard-button"
		mat-icon-button
		matTooltip="Copier un lien de partage"
		(click)="copyToClipboard()"
	>
		<mat-icon>link</mat-icon>
	</button>
	<button
		class="thickness-button"
		mat-icon-button
		[matTooltip]="`${state.projectionMode() ? 'Désactiver' : 'Activer'} le mode projection`"
		(click)="state.toggleProjectionMode()"
	>
		<mat-icon>format_size</mat-icon>
	</button>
	@for (tilesMode of tilesModesList; track $index) {
		<button
			class="tiles-mode-button"
			mat-icon-button
			[matTooltip]="tilesModes[tilesMode].title"
			[disabled]="state.tilesMode() === tilesMode"
			(click)="state.setTilesMode(tilesMode)"
		>
			<mat-icon svgIcon="app:{{tilesMode}}" />
		</button>
	}
</mat-toolbar>

<mat-sidenav-container fullscreen [class.projection-mode]="state.projectionMode()">
	<mat-sidenav mode="side" disableClose="true" opened>
		<button mat-raised-button [matMenuTriggerFor]="menu">
			<span>Ajouter…</span>
		</button>
		<mat-menu #menu="matMenu">
			@for (simpleElementType of simpleElementTypes; track $index) {
				<button mat-menu-item (click)="state.addSimpleElement(simpleElementType)">
					{{simpleElementType.name}}
				</button>
				
				@if (shouldAddDividerAfter(simpleElementType)) {
					<mat-divider />
				}
			}
		</mat-menu>
		@for (simpleElement of state.simpleElements(); track $index) {
			<app-simple-element
				[simpleElement]="simpleElement"
				(remove)="state.removeSimpleElement(simpleElement)"
				@items
			/>
		}
	</mat-sidenav>
	<mat-sidenav-content>
		<div class="transfer-function-texs">
			<div [appMath]="state.simpleElements().transferFunctionTex"></div>
			<div [appMath]="state.simpleElements().transferFunctionClosedLoopTex"></div>
		</div>
		<app-graphs-grid />
	</mat-sidenav-content>
</mat-sidenav-container>
