<mat-toolbar color="primary" role="header">
	<span>Asservissement</span>
	<span class="spacer"></span>
	@for (tilesModeType of [0, 1, 2, 3]; track $index) {
		<button
			mat-icon-button
			[disabled]="state.tilesMode() === tilesModeType"
			(click)="state.setTilesMode(tilesModeType)"
		>
			<img src="../assets/tiles/{{state.tilesMode() === tilesModeType ? 'enabled' : 'disabled'}}/{{tilesModeType}}.png" alt="Mode d'affichage {{tilesModeType}}" />
		</button>
	}
</mat-toolbar>

<mat-sidenav-container fullscreen>
	<mat-sidenav mode="side" disableClose="true" opened>
		<button mat-raised-button [matMenuTriggerFor]="menu">
			<span>Ajouterâ€¦</span>
		</button>
		<mat-menu #menu="matMenu">
			@for (simpleElementType of simpleElementTypes; track $index) {
				@if (simpleElementType !== null) {
					<button mat-menu-item (click)="state.addSimpleElement(simpleElementType[1]())">
						{{simpleElementType[0]}}
					</button>
				}
				@else {
					<mat-divider />
				}
			}
		</mat-menu>
		@for (simpleElement of state.simpleElements(); track $index) {
			<app-simple-element
				[simpleElement]="simpleElement"
				(remove)="state.removeSimpleElement(simpleElement)"
				@items
			/>
		}
	</mat-sidenav>
	<mat-sidenav-content>
		<div class="transfer-function-texs card">
			<div [appMath]="transferFunctionTex()"></div>
			<div [appMath]="transferFunctionClosedLoopTex()"></div>
		</div>
		<div [appExplicitGrid]="['1:1', '2:1', '1:2', '2:2'][state.tilesMode()]" class="graphs">
			<app-graph [transferFunction]="transferFunction()" class="card" />
			@if (state.tilesMode() >= 1) { <app-graph [transferFunction]="transferFunction()" class="card" /> }
			@if (state.tilesMode() >= 3) { <app-graph [transferFunction]="transferFunction()" class="card" /> }
			@if (state.tilesMode() >= 3) { <app-graph [transferFunction]="transferFunction()" class="card" /> }
		</div>
	</mat-sidenav-content>
</mat-sidenav-container>
